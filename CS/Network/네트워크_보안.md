# λ„¤νΈμ›ν¬ λ³΄μ•
## λ°μ΄ν„° μ•”νΈν™” λ°©μ‹

### λ€μΉ­ν‚¤

- ν•λ‚μ λ€μΉ­ν‚¤λ¥Ό μ΄μ©ν•΄μ„ λ°μ΄ν„°μ μ•”νΈν™” λ³µνΈν™”ν•λ‹¤.
- λ€μΉ­ν‚¤λ” μ•”νΈν™”μ™€ λ³µνΈν™” μ†λ„κ°€ λ§¤μ° λΉ λ¥΄λ‹¤.
- ν‚¤λ¥Ό μƒλ€λ°©μ—κ² μ „λ‹¬ν•λ” κ³Όμ •μ—μ„ νƒμ·¨λ  μ„ν—μ΄ μλ‹¤.

### κ³µκ°ν‚¤

- κ³µκ°ν‚¤λ” λ¨λ“  μ‚¬λμ—κ² κ³µκ°λ μλ‹¤. κ°μΈν‚¤λ” λ°μ΄ν„°λ¥Ό λ³µνΈν™”ν•λ” μ£Όμ²΄λ§ κ°€μ§€κ³  μλ‹¤.
- λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•  λ•λ” κ³µκ°ν‚¤(public key)λ¥Ό μ‚¬μ©ν•λ‹¤. λ°μ΄ν„°λ¥Ό λ³µνΈν™”ν•  λ•λ” κ°μΈν‚¤(private key)λ¥Ό μ‚¬μ©ν•λ‹¤.
- λ€μΉ­ν‚¤μ— λΉ„ν•΄ λ°μ΄ν„° λ³µνΈν™” μ†λ„κ°€ λλ¦¬λ‹¤.

π’΅κ°μΈν‚¤λ΅ λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•κ³  κ³µκ°ν‚¤λ΅ λ³µνΈν™”ν•  μλ„ μλ‹¤.

π’΅SSL ν†µμ‹ μ—μ„λ” λ€μΉ­ν‚¤λ¥Ό κµν™ν•κΈ° μ„ν•΄μ„ κ³µκ°ν‚¤ λ°©μ‹μ„ μ‚¬μ©ν•λ‹¤.

π’΅pμ™€ np μ•κ³ λ¦¬μ¦

- p λ¬Έμ 
    - λ‹¤ν•­ μ‹κ°„λ™μ• ν•΄κ²°ν•  μ μλ” μ•κ³ λ¦¬μ¦μ΄ μ΅΄μ¬ν• λ¬Έμ 
- np λ¬Έμ 
    - λ‹¤ν–‰ μ‹κ°„λ™μ• ν•΄κ²°ν•  μ•κ³ λ¦¬μ¦μ„ μ•„μ§ λ°κ²¬ λ»ν• λ¬Έμ 
    - ν•΄κ²°ν•  μ μλ” μ•κ³ λ¦¬μ¦μ΄ μ—†λ”μ§€, μ•„λ‹λ©΄ μ•„μ§ λ°κ²¬ λ»ν• κ±΄μ§€ λ¨λ¥΄λ” μƒν™©μ΄λ‹¤.

## μΈμ¦

λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•΄λ„ μ¤‘κ°„μ— κ³µκ²©μκ°€ λ°μ΄ν„°λ¥Ό κΈ°λ΅ν• ν›„ κ·Έλ€λ΅ μ „μ†΅ν•λ‹¤λ©΄ λ³΄μ•μ΄ λ¤λ¦¬κ²λλ‹¤.

μ΄λ¥Ό μ„ν•΄ μ•„λμ™€ κ°™μ€ κ³Όμ •μ„ κ±°μΉλ‹¤.

1. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈκ°€ λ΅κ·ΈμΈν•  λ• λλ¤ν• μ«μλ¥Ό μ „μ†΅ν•λ‹¤.
2. ν΄λΌμ΄μ–ΈνΈλ” λλ¤ν• μ«μλ¥Ό μμ‹ μ κ°μΈν‚¤λ΅ μ•”νΈν™”ν•΄μ„ μ „λ‹¬ν•λ‹¤.
3. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ—κ² κ³µκ°ν‚¤λ¥Ό μ”μ²­ν•λ‹¤.
4. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ—κ² κ³µκ°ν‚¤λ¥Ό μ „λ‹¬ν•λ‹¤.
5. μ„λ²„λ” λλ¤ν• μ«μλ¥Ό ν΄λΌμ΄μ–ΈνΈμ κ³µκ°ν‚¤λ΅ λ³µνΈν™”ν•λ‹¤.

ν•μ§€λ§ μ„ λ°©λ²•μ 4λ² κ³Όμ •μ—μ„ μ„λ²„λ” μ „λ‹¬λ°›μ€ κ³µκ°ν‚¤κ°€ μ •λ§ ν†µμ‹ μ„ ν•λ ν΄λΌμ΄μ–ΈνΈμ κ³µκ°ν‚¤μΈμ§€ ν™•μΈν•  μ μ—†λ‹¤λ” λ§Ήμ μ΄ μλ‹¤.

 μ„μ λ§Ήμ μ„ ν•΄κ²°ν•κΈ° μ„ν•΄ μΈμ¦κΈ°κ΄€(CA)μ΄ ν•„μ”ν•λ‹¤.

ν΄λΌμ΄μ–ΈνΈλ” μΈμ¦κΈ°κ΄€μ κ³µκ°ν‚¤λ΅ μ•”νΈν™”λ μμ‹ μ κ³µκ°ν‚¤λ¥Ό μ„λ²„μ— μ „λ‹¬ν•κ³ , μ„λ²„λ” μΈμ¦ κΈ°κ΄€μ κ°μΈν‚¤λ΅ λ³µνΈν™”ν•΄μ„ ν΄λΌμ΄μ–ΈνΈμ κ³µκ°ν‚¤λ¥Ό μ–»λ”λ‹¤.

π’΅μ„ κ³Όμ •μ€ λΈλΌμ°μ €κ°€ μ„λ²„μ™€ SSL ν†µμ‹ μ„ ν•λ” κ³Όμ •κ³Ό μ μ‚¬ν•λ‹¤. λ‹¤λ§ μ„ κ³Όμ •μ—μ„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ κ΄€κ³„κ°€ λ°λ€λ΅ λλ‹¤.

π’΅λΈλΌμ°μ €μ—λ” μΈμ¦κΈ°κ΄€μ κ°μΈν‚¤κ°€ λ‚΄μ¥λΌ μλ‹¤. λ”°λΌμ„ λΈλΌμ°μ €λ” μΈμ¦κΈ°κ΄€μ κ³µκ°ν‚¤λ¥Ό λ³µνΈν™”ν•΄μ„ μ„λ²„μ κ³µκ°ν‚¤λ¥Ό μ–»μ„ μ μλ‹¤.

## μ „μ μ„λ…

μ „λ‹¬ν•  λ©”μ‹μ§€μ λ¬΄κ²°μ„±κ³Ό μΈμ¦μ„ λ™μ‹μ— ν•κΈ°μ„ν•΄ μ‚¬μ©λλ” λ°©μ‹μ΄λ‹¤.

μ΄λ¥Ό μ„ν•΄μ„ λ©”μ‹μ§€λ¥Ό κ°μΈν‚¤λ΅ μ•”νΈν™”ν•κ³  μƒλ€λ°©μ—κ² μ „λ‹¬ν•λ©΄ λλ‹¤. ν•μ§€λ§ λ©”μ‹μ§€μ κΈΈμ΄κ°€ κΈΈ κ²½μ° μ•”νΈν™”ν•λ” μ‹κ°„μ΄ λ„λ¬΄ μ¤λκ±Έλ¦¬λ” λ¬Έμ κ°€ μλ‹¤.

λ”°λΌμ„ λ³΄ν†µμ μ „μ μ„λ…μ€ μ•„λμ™€ κ°™μ€ κ³Όμ •μ„ κ±°μΉλ‹¤.

1. Senderλ” λ©”μ‹μ§€λ¥Ό Hash ν•¨μλ¥Ό ν†µν•΄ μ‘μ€ λ°μ΄ν„°λ΅ μ¶•μ†ν• ν›„ κ°μΈν‚¤λ΅ μ•”νΈν™”ν•λ‹¤.
2. Senderλ” λ©”μ‹μ§€μ™€ μ•”νΈν™”λ λ°μ΄ν„°λ¥Ό Receiverμ—κ² λ³΄λ‚Έλ‹¤.
3. Receiverλ” μ•”νΈν™”λ λ°μ΄ν„°λ¥Ό Senderμ κ³µκ°ν‚¤λ΅ λ³µνΈν™”ν•λ‹¤.
4. Receiverλ” μ „λ‹¬λ°›μ€ λ©”μ‹μ§€λ¥Ό Hash ν•¨μλ¥Ό ν†µν•΄ λ³€ν™ν•κ³  κ³µκ°ν‚¤λ΅ λ³µνΈν™”ν• λ°μ΄ν„°μ™€ λΉ„κµν•΄μ„ λ©”μ‹μ§€μ λ¬΄κ²°μ„±μ„ ν™•μΈν•λ‹¤.

π’΅ν•΄μ‹ ν•¨μλ” μ„μμ κΈΈμ΄μ λ°μ΄ν„°λ¥Ό κ³ μ •λ κΈΈμ΄μ λ°μ΄ν„°λ΅ λ§¤ν•‘ν•λ” ν•¨μμ΄λ‹¤.

π’΅ν•΄μ‹ ν•¨μμ κ²°κ³Όκ°’μΌλ΅ μΈν’‹ κ°’μ„ μ¶”μ¶•ν•  μ μ—†λ‹¤.

## λ³΄μ• λ©”μΌ(Securing Email)

λ³΄μ• λ©”μΌ μ—­μ‹ λ°μ΄ν„°μ λ¬΄κ²°μ„±κ³Ό μΈμ¦κ³Όμ •μ„ κ±°μΉκΈ° μ„ν•΄μ„ μ „μ μ„λ…κ³Ό μ μ‚¬ν• λ°©μ‹μ„ μ‚¬μ©ν•λ‹¤.

Senderλ” μ΄ 3κ°μ ν‚¤λ¥Ό μ‚¬μ©ν•λ‹¤.

- Senderμ κ°μΈν‚¤
- Receiverμ κ³µκ°ν‚¤
- μƒλ΅ μƒμ„±λ λ€μΉ­ν‚¤

μ•”νΈν™”λ μ΄λ©”μΌμ€ λ™μ‘ κ³Όμ •μ€ λ‹¤μκ³Ό κ°™λ‹¤.

1. Senderλ” λ©”μ‹μ§€λ¥Ό ν•΄μ‹ ν•¨μλ¥Ό μ΄μ©ν•΄μ„ μ‘μ€ λ°μ΄ν„°λ΅ μ¶•μ†ν• ν›„ μμ‹ μ κ°μΈν‚¤λ΅ λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•λ‹¤.
2. Senderλ” 1μ—μ„ μ•”νΈν™”ν• λ°μ΄ν„°μ™€ λ©”μ‹μ§€λ¥Ό λ€μΉ­ν‚¤λ΅ μ•”νΈν™”ν•λ‹¤.
3. Senderλ” 2μ—μ„ μ•”νΈν™”ν• λ°μ΄ν„°μ™€ λ€μΉ­ν‚¤λ¥Ό Receiverμ κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν• ν›„ Reciverμ—κ² μ „λ‹¬ν•λ‹¤.
4. Receiverλ” μμ‹ μ κ°μΈν‚¤μ™€ λ€μΉ­ν‚¤ κ·Έλ¦¬κ³  Senderμ κ³µκ°ν‚¤λ΅ λ°μ΄ν„°λ¥Ό λ³µνΈν™”ν•κ³  λ°μ΄ν„°μ λ¬΄κ²°μ„±μ„ κ²€μ¦ν•λ‹¤.

π’΅κ³Όκ±°μ—λ” μΈμ¦κΈ°κ΄€μ΄ μ—†μ—κΈ° λ•λ¬Έμ— λ…ν•¨μ„ κµν™ν•  λ• μμ‹ μ κ³µκ°ν‚¤λ¥Ό ν•¨κ» μ „λ‹¬ν–λ‹¤.

## TCPμ™€ SSL

HTTP ν†µμ‹ μ κ²½μ° λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•μ§€ μ•μΌλ©΄ λ„¤νΈμ›ν¬ μ¤‘κ°„μ— λ„κµ¬λ‚ λ°μ΄ν„°λ¥Ό ν™•μΈν•  μ μλ‹¤.

μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄μ„ TCP μ†μΌ“μ— λ°μ΄ν„°λ¥Ό μ „μ†΅ν•κΈ° μ΄μ „μ— λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•΄μ•Όν•λ‹¤.

μ„ μ•”νΈν™” κ³Όμ •μ„ μλ™ν™”ν• κ²ƒμ΄ SSLμ΄λ‹¤. μµκ·Όμ—λ” SSL λ€μ‹  TLSλΌλ” μ©μ–΄λ΅ λ§μ΄ μ‚¬μ©ν•λ‹¤.

- SSLμ€ TCP ν†µμ‹ μ„ κΈ°λ°μΌλ΅ λ™μ‘ν•λ‹¤. SSL ν†µν•΄ ν†µμ‹ μ„ ν•κΈ° μ„ν•΄μ„λ” λ¨Όμ € TCPμ μ—°κ²°(3 way handshake) κ³Όμ •μ„ κ±°μ³μ•Όν•λ‹¤.
- SSL ν†µμ‹  κ³Όμ •μ€ λ‹¤μκ³Ό κ°™λ‹¤.
    1. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ—κ² ν•λ‚μ μ”μ²­μ„ λ³΄λ‚Έλ‹¤.(Client Hello)
    2. CAμ κ°μΈν‚¤λ΅ μ•”νΈν™”λ μμ‹ μ κ³µκ°ν‚¤(SSL μΈμ¦μ„)λ¥Ό ν΄λΌμ΄μ–ΈνΈμ— μ „λ‹¬ν•λ‹¤.
    3. ν΄λΌμ΄μ–ΈνΈλ” λΈλΌμ°μ €μ— λ‚΄μ¥λ CAμ κ³µκ°ν‚¤ λ©λ΅μΌλ΅ μ„λ²„μ κ³µκ°ν‚¤λ¥Ό νλ“ν•κ³ , λ§μ¤ν„° ν‚¤λ¥Ό μ„λ²„μ κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•μ—¬ μ„λ²„μ— μ „λ‹¬ν•λ‹¤.
    4. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈλ΅ λ¶€ν„° μ „λ‹¬λ°›μ€ λ°μ΄ν„°λ¥Ό μμ‹ μ κ°μΈν‚¤λ΅ λ³µνΈν™”ν•΄μ„ λ§μ¤ν„° ν‚¤λ¥Ό νλ“ν•λ‹¤.
- λ§μ¤ν„° ν‚¤μ—λ” 4κ°€μ§€ μΆ…λ¥μ ν‚¤κ°€ μ΅΄μ¬ν•λ‹¤.
    - Kc - Clientμ—μ„ Serverλ΅ λ°μ΄ν„°λ¥Ό λ³΄λ‚Ό λ• μ•”νΈν™”ν•λ” ν‚¤
    - Mc - Clientμ—μ„ Serverλ΅ μ „λ‹¬ν•  λ°μ΄ν„°μ MACμ„ μ•”νΈν™”ν•λ” ν‚¤
    - Ks - Serverμ—μ„ Clientλ΅ λ°μ΄ν„°λ¥Ό λ³΄λ‚Ό λ• μ•”νΈν™”ν•λ” ν‚¤
    - Ms - Serverμ—μ„ Clientλ΅ μ „λ‹¬ν•  λ°μ΄ν„°μ MACμ„ μ•”νΈν™”ν•λ” ν‚¤

π’΅MAC(Message Authentication Code) λ©”μ‹μ§€μ λ¬΄κ²°μ„±μ„ κ²€μ¦ν•κΈ° μ„ν•΄ μ‚¬μ©ν•λ” λ°©μ‹μ΄λ‹¤. μ „λ‹¬ν•  λ©”μ‹μ§€μ™€ ν‚¤λ¥Ό ν•¨κ» ν•΄μ‹ ν•¨μλ΅ μ΄μ©ν•΄μ„ MAC μ½”λ“λ΅ λ³€ν™ν•λ‹¤. Receiverλ” λ©”μ‹μ§€μ™€ ν‚¤λ¥Ό μ΄μ©ν•΄μ„ ν•΄μ‹ ν•¨μλ΅ μ½”λ“λ¥Ό μƒμ„±ν•κ³  μ „λ‹¬λ°›μ€ MAC μ½”λ“μ™€ λΉ„κµν•΄μ„ λ©”μ‹μ§€μ λ¬΄κ²°μ„±μ„ κ²€μ¦ν•λ‹¤.

π’΅SSL sequence numberλ„ μ΄μ©ν•΄μ„ MAC μ½”λ“λ¥Ό μƒμ„±ν•λ©΄ λ©”μ‹μ§€ μμ„λ¥Ό μ„μλ΅ μ΅°μ •ν•λ” reordering κ³µκ²©μ„ λ°©μ§€ν•  μ μλ‹¤.

π’΅κ³µκ²©μκ°€ μ„μλ΅ FIN λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄λ” κ²ƒμ„ λ°©μ§€ν•κΈ° μ„ν•΄ type ν•„λ“λ„ μ‚¬μ©λλ‹¤. type ν•„λ“κ°€ 1μ΄λ©΄ ν•΄λ‹Ή λ©”μ‹μ§€ FINμ΄κ³ , 0μ΄λ©΄ FINμ΄ μ•„λ‹κ²ƒμ„ μλ―Έν•λ‹¤. MACμ„ μƒμ„±ν•  λ• type ν•„λ“λ„ ν•¨κ» μ‚¬μ©ν•  μ μλ‹¤.

π’΅λ¶λ²• μ‚¬μ΄νΈμ μ ‘μ†μ„ μ°¨λ‹¨ν•κΈ° μ„ν•΄μ„ κ°„λ‹¨ν μ‚¬μ©ν•λ” λ°©μ‹μ΄ HTTP Requestμ host ip μ£Όμ† κΈ°μ¤€μΌλ΅ μ ‘μ† μ°¨λ‹¨μ„ κ²°μ •ν•λ” λ°©μ‹μ΄λ‹¤. ν•μ§€λ§ μ΄λ¬ν• λ°©μ‹μ€ Requestμ host ipλ¥Ό ν™•μΈν•  μ μ—†λ”(μ•”νΈν™” λκΈ° λ•λ¬Έμ—) HTTPS ν†µμ‹ μ—μ„λ” μ‚¬μ©ν• μ μ—†λ‹¤.